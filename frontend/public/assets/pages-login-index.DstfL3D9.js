import{u as s,b as e,a,d as r,w as o,i as t,o as l,e as i,h as n,j as d,f as u,I as c,t as f,k as m,F as p,l as g,m as h,v as w}from"./index-BJtJjslE.js";import{a as _,_ as M}from"./_plugin-vue_export-helper.CmGny4PI.js";const D=M({name:"LoginPage",data:()=>({isRegisterMode:!1,showPassword:!1,showConfirmPassword:!1,isLoading:!1,errorMessage:"",formData:{username:"",password:"",confirmPassword:"",role:"user"},roleOptions:[{label:"èµ„æºåè°ƒ",value:"resource_coordinator",icon:"ğŸ‘‘"},{label:"æŠ€æœ¯ç»ç†",value:"tech_manager",icon:"ğŸ’¼"},{label:"é¡¾é—®",value:"consultant",icon:"ğŸ“"},{label:"æ™®é€šç”¨æˆ·",value:"user",icon:"ğŸ‘¤"}],defaultAccounts:[{username:"admin",password:"123456",roleLabel:"èµ„æºåè°ƒ"},{username:"user1",password:"123456",roleLabel:"æŠ€æœ¯ç»ç†"},{username:"user2",password:"123456",roleLabel:"é¡¾é—®"}]}),methods:{toggleMode(){this.isRegisterMode=!this.isRegisterMode,this.clearForm()},togglePassword(){this.showPassword=!this.showPassword},toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword},selectRole(s){this.formData.role=s},clearError(){this.errorMessage=""},clearForm(){this.formData={username:"",password:"",confirmPassword:"",role:"user"},this.errorMessage=""},useDefaultAccount(s){this.formData.username=s.username,this.formData.password=s.password,this.handleSubmit()},validateForm(){if(!this.formData.username.trim())return this.errorMessage="è¯·è¾“å…¥ç”¨æˆ·å",!1;if(this.formData.username.trim().length<3)return this.errorMessage="ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦",!1;if(!this.formData.password)return this.errorMessage="è¯·è¾“å…¥å¯†ç ",!1;if(this.formData.password.length<6)return this.errorMessage="å¯†ç è‡³å°‘6ä½",!1;if(this.isRegisterMode){if(!this.formData.confirmPassword)return this.errorMessage="è¯·ç¡®è®¤å¯†ç ",!1;if(this.formData.password!==this.formData.confirmPassword)return this.errorMessage="ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´",!1}return!0},async handleSubmit(){if(this.validateForm()){this.isLoading=!0,this.errorMessage="";try{const r=this.isRegisterMode?_.register({username:this.formData.username.trim(),password:this.formData.password,role:this.formData.role}):_.login({username:this.formData.username.trim(),password:this.formData.password}),o=await r;o.success&&o.data?(s("userInfo",{id:o.data.id,username:o.data.username,role:o.data.role}),s("token",o.data.token),e({title:this.isRegisterMode?"æ³¨å†ŒæˆåŠŸ":"ç™»å½•æˆåŠŸ",icon:"success",duration:1500}),setTimeout(()=>{a({url:"/pages/company/index"})},1500)):this.errorMessage=o.message||(this.isRegisterMode?"æ³¨å†Œå¤±è´¥":"ç™»å½•å¤±è´¥")}catch(r){console.error("æ“ä½œå¤±è´¥:",r),this.errorMessage=r.message||"ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•"}finally{this.isLoading=!1}}}}},[["render",function(s,e,a,_,M,D){const P=n,k=t,b=c,C=w;return l(),r(k,{class:"login-page"},{default:o(()=>[i(k,{class:"login-container"},{default:o(()=>[i(k,{class:"login-header"},{default:o(()=>[i(P,{class:"app-title"},{default:o(()=>[d("è®°è´¦åŠ©æ‰‹ By HAISNAP")]),_:1}),i(P,{class:"app-subtitle"},{default:o(()=>[d("å…¬å¸ç®¡ç†å¹³å°")]),_:1})]),_:1}),i(k,{class:"login-form"},{default:o(()=>[i(k,{class:"form-group"},{default:o(()=>[i(k,{class:"input-wrapper"},{default:o(()=>[i(P,{class:"input-icon"},{default:o(()=>[d("ğŸ‘¤")]),_:1}),i(b,{class:"form-input",type:"text",modelValue:M.formData.username,"onUpdate:modelValue":e[0]||(e[0]=s=>M.formData.username=s),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",onInput:D.clearError},null,8,["modelValue","onInput"])]),_:1})]),_:1}),i(k,{class:"form-group"},{default:o(()=>[i(k,{class:"input-wrapper"},{default:o(()=>[i(P,{class:"input-icon"},{default:o(()=>[d("ğŸ”’")]),_:1}),i(b,{class:"form-input",type:M.showPassword?"text":"password",modelValue:M.formData.password,"onUpdate:modelValue":e[1]||(e[1]=s=>M.formData.password=s),placeholder:"è¯·è¾“å…¥å¯†ç ",onInput:D.clearError},null,8,["type","modelValue","onInput"]),i(P,{class:"toggle-password",onClick:D.togglePassword},{default:o(()=>[d(f(M.showPassword?"ğŸ‘ï¸":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),M.isRegisterMode?(l(),r(k,{key:0,class:"form-group"},{default:o(()=>[i(k,{class:"input-wrapper"},{default:o(()=>[i(P,{class:"input-icon"},{default:o(()=>[d("ğŸ”‘")]),_:1}),i(b,{class:"form-input",type:M.showConfirmPassword?"text":"password",modelValue:M.formData.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>M.formData.confirmPassword=s),placeholder:"è¯·ç¡®è®¤å¯†ç ",onInput:D.clearError},null,8,["type","modelValue","onInput"]),i(P,{class:"toggle-password",onClick:D.toggleConfirmPassword},{default:o(()=>[d(f(M.showConfirmPassword?"ğŸ‘ï¸":"ğŸ‘ï¸â€ğŸ—¨ï¸"),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):u("",!0),M.isRegisterMode?(l(),r(k,{key:1,class:"form-group"},{default:o(()=>[i(k,{class:"role-selector"},{default:o(()=>[i(P,{class:"role-label"},{default:o(()=>[d("é€‰æ‹©è§’è‰²")]),_:1}),i(k,{class:"role-options"},{default:o(()=>[(l(!0),m(p,null,g(M.roleOptions,s=>(l(),r(k,{class:h(["role-option",{active:M.formData.role===s.value}]),key:s.value,onClick:e=>D.selectRole(s.value)},{default:o(()=>[i(P,{class:"role-icon"},{default:o(()=>[d(f(s.icon),1)]),_:2},1024),i(P,{class:"role-text"},{default:o(()=>[d(f(s.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1})):u("",!0),M.errorMessage?(l(),r(k,{key:2,class:"error-message"},{default:o(()=>[i(P,{class:"error-text"},{default:o(()=>[d(f(M.errorMessage),1)]),_:1})]),_:1})):u("",!0),i(k,{class:"form-actions"},{default:o(()=>[i(C,{class:h(["btn btn-primary",{loading:M.isLoading}]),onClick:D.handleSubmit,disabled:M.isLoading},{default:o(()=>[d(f(M.isLoading?"å¤„ç†ä¸­...":M.isRegisterMode?"æ³¨å†Œ":"ç™»å½•"),1)]),_:1},8,["class","onClick","disabled"])]),_:1}),i(k,{class:"form-footer"},{default:o(()=>[i(P,{class:"toggle-mode",onClick:D.toggleMode},{default:o(()=>[d(f(M.isRegisterMode?"å·²æœ‰è´¦å·ï¼Ÿç«‹å³ç™»å½•":"æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ"),1)]),_:1},8,["onClick"])]),_:1}),M.isRegisterMode?u("",!0):(l(),r(k,{key:3,class:"default-accounts"},{default:o(()=>[i(P,{class:"accounts-title"},{default:o(()=>[d("é»˜è®¤è´¦å·")]),_:1}),i(k,{class:"account-list"},{default:o(()=>[(l(!0),m(p,null,g(M.defaultAccounts,s=>(l(),r(k,{class:"account-item",key:s.username,onClick:e=>D.useDefaultAccount(s)},{default:o(()=>[i(P,{class:"account-username"},{default:o(()=>[d(f(s.username),1)]),_:2},1024),i(P,{class:"account-role"},{default:o(()=>[d(f(s.roleLabel),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-601a29e5"]]);export{D as default};
